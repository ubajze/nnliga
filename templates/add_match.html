<!DOCTYPE HTML>

<html>

<script type="text/javascript">
    function calcSize(frame_id)
    {

    //find the height of the internal page
    var the_height = document.getElementById(frame_id).contentWindow.document.body.scrollHeight;
    var the_width = document.getElementById(frame_id).contentWindow.document.body.scrollWidth;

    //change the height of the iframe
    document.getElementById(frame_id).height = the_height;
    document.getElementById(frame_id).width = the_width;
    }


    function toggle_visibility(id) 
    {
        var e = document.getElementById(id);
        if ( e.style.display == 'block' )
            e.style.display = 'none';
        else
            e.style.display = 'block';
    }

    function httpGet(url_request)
    {
        var req = new XMLHttpRequest();
        req.open('GET', url_request, false);
        req.send(null);
        var headers = req.getAllResponseHeaders().toLowerCase();
        alert(headers);
    }
</script>

<style type="text/css">
   .hidden {
        display: none;
   {
   .visible {
        display: block;
   }
</style>

<head>
  <title>NNLiga</title>
  <meta name="description" content="website description" />
  <meta name="keywords" content="website keywords, website keywords" />
  <meta http-equiv="content-type" content="text/html; charset=windows-1252" />
  <link rel="stylesheet" type="text/css" href="style/style.css" />
</head>

<body>

  <div id="main">
    <div id="header">
      <div id="logo">
        <div id="logo_text">
          <!-- class="logo_colour", allows you to change the colour of the text -->
          <h1><a href="list_match.html">NNliga</a></h1>
          <h2>Naklanska nogometna liga</h2>
        </div>
      </div>
      <div id="menubar">
        <ul id="menu">
          <!-- put class="selected" in the li tag for the selected page - to highlight which page you're on -->
          <li><a href="/">Tekme</a></li>
          <li><a href="/list_stat">Statistika</a></li>
          <li>{% if authorization_season_add %}<a href="/add_season">Dodaj sezono</a>{% endif %}</li>
          <li>{% if authorization_player_add %}<a href="/add_player">Dodaj Igralca</a>{% endif %}</li>
          <li class="selected">{% if authorization_match_add %}<a href="/add_match">Dodaj tekmo</a>{% endif %}</li>
          <li>{% if not authenticated %}<a href="/login">Prijava</a>{% else %}<a href="/logout">Odjava</a>{% endif %}</li>
        </ul>
      </div>
    </div>
    <div id="content_header"></div>
    <div id="site_content">
      <!-- <div id="banner"></div> -->
      <div id="content">



        {% if error_msg_login %}
        Prijavi se z Google računom.
        {% elif error_msg_authorization %}
        Nisi avtoriziran za dodajanje tekme.
        {% else %}

        <script language="Javascript" type="text/javascript">

        var counter = 2;
        var div_id = "player_options_1";
        var append_location = "match_input";


        function add_input(){
          var new_id = "player_options_" + counter;
          var newdiv = document.createElement('div');
          var input_html = document.getElementById(div_id).innerHTML;
          var old_string_A = "teamA_1";
          var old_string_B = "teamB_1";
          var new_string_A = "teamA_" + counter;
          var new_string_B = "teamB_" + counter;
          input_html = input_html.replace(old_string_A,new_string_A);
          input_html = input_html.replace(old_string_B,new_string_B);
          newdiv.setAttribute('id',new_id);
          newdiv.innerHTML = input_html;
          document.getElementById(append_location).appendChild(newdiv);
          counter++;
        }

        function delete_input(){
          var deleted_div_name = "player_options_" + (counter - 1)
          var deleted_div = document.getElementById(deleted_div_name);
          if (counter > 2) {
            deleted_div.parentNode.removeChild(deleted_div);
            counter = counter - 1
          }
        }
        </script>

        {% if add_match_block %}

        <h2>Dodaj tekmo</h2>

        <br>
        <div><a href="/update_stat?season={{ season }}">Posodobi statistiko</a></div>
        <br>

        <h3>Sezona: {{ season }}</h3>
        <div id="{{ season }}">
        <form method="post">
          <input type="hidden" name="season" value="{{ season }}">
          Datum: <input type="date" name="match_date"><br>
          Rezultat ekipe A<input type="text" name="teamA_score"><br>
          Rezultat ekipe B<input type="text" name="teamB_score"><br><br>
          Ekipa A in B<br><br>
          <div id="match_input">
          <div id="player_options_1">
            <select name="teamA_1">
              <option value=""></option>
              {% for player in player_list %}
              <option value="{{ player.player_name }}">{{ player.player_name }}</option>
              {% endfor %}
            </select>
            <select name="teamB_1">
              <option value=""></option>
              {% for player in player_list %}
              <option value="{{ player.player_name }}">{{ player.player_name }}</option>
              {% endfor %}
            </select>
          </div>
          </div>
          <br>
          <input type="button" value="Dodaj igralce" onClick="add_input();">
          <input type="button" value="Zbriši igralce" onClick="delete_input();"><br>
          <input type="submit" value="Potrdi tekmo">
          <br>
          
        </form><br><br>
        </div>

        {% for match in matches %}
        <li> <br>
          Datum: {{ match.date }}<br>
          Rezultat ekipe A: {{ match.scoreA }}<br>
          Rezultat ekipe B: {{ match.scoreB }}<br>
          Ekipa A: {% for player in match.teamA %} {{ player }}, {% endfor %}<br>
          Ekipa B: {% for player in match.teamB %} {{ player }}, {% endfor %}<br>
          <form method="post">
            <input type="hidden" name="delete" value="True">
            <input type="hidden" name="date" value="{{ match.date }}">
            <input type="submit" value="Izbriši tekmo">
          </form>
          

        </li><br>
        {% endfor %}

        {% else %}
        <h2>Seznam sezon</h2>
        <ul>
        {% for season in seasons %}
        <li><a href="/add_match?season={{ season }}">Sezona {{ season }}</a></li>
        {% endfor %}
        </ul>
        {% endif %}


        {% endif %}


      </div>
    </div>
    <div id="content_footer"></div>
    <div id="footer">
    </div>
  </div>
</body>
</html>
